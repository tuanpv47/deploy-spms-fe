(this["webpackJsonpspms-fe"]=this["webpackJsonpspms-fe"]||[]).push([[76],{1251:function(e,t,n){},1252:function(e,t){e.exports=[{id:9,name:"Admin",permissions:[{id:1,description:"ph\xe2n quy\u1ec1n tr\xean m\xf4n h\u1ecdc",resources:"mon-hoc",actions:[{method:"get",isEnable:!0},{method:"post",isEnable:!1},{method:"put",isEnable:!1},{method:"delete",isEnable:!1}]},{id:2,description:"ph\xe2n quy\u1ec1n tr\xean syllabus",resources:"syllabus",actions:[{method:"get",isEnable:!0},{method:"post",isEnable:!0},{method:"put",isEnable:!0},{method:"delete",isEnable:!0}]}]}]},1253:function(e,t){e.exports.MapMethodToAction={get:"READ",post:"CREATE",put:"UPDATE",delete:"DELETE"}},634:function(e,t,n){"use strict";n.r(t);var o=n(3),i=n(14),c=n(13),r=n.n(c),a=n(19),l=n(15),s=n(2),d=n.n(s),u=(n(6),n(17)),v=(n(62),n(652),n(26)),O=n(685),j=(n(1251),n(10)),b=n(269),p=n(655),h=(n(1252),n(222)),E=n(280),m=n(296),f=n(227),S=n(236),x=n(273),g=n(297),R=n(267),C=n(268),y=n(67),I=n(104),N=function(e){var t=Object(I.a)().t;return Object(o.jsxs)(g.a,{isOpen:e.modal,toggle:e.toggle,children:[Object(o.jsx)(R.a,{children:e.bodyContent||""}),Object(o.jsxs)(C.a,{children:[Object(o.jsx)(y.a,{color:"".concat(e.isModalDelete?"danger":"primary"),onClick:e.handleOkButtonOnClick,children:t(e.titleOk||"admin.common.OK")}),Object(o.jsx)(y.a,{color:"warning",onClick:e.handleCancelButtonOnClick,children:t(e.titleCancel||"admin.common.CANCEL")})]})]})},k=n(61),_=n(1253),M=n(12),A=function(e){var t,n;return Object(o.jsx)("div",{style:{padding:"10px 50px"},children:(null===e||void 0===e?void 0:e.permissionSelected)&&(null===e||void 0===e||null===(t=e.permissionSelected)||void 0===t||null===(n=t.permission)||void 0===n?void 0:n.map((function(t,n){var c;return Object(o.jsx)("div",{children:Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{type:"checkbox",checked:(null===t||void 0===t?void 0:t.isEnable)||!1,onChange:function(t){var o;return function(t,n){var o,c=Object(i.a)({},null===e||void 0===e?void 0:e.permissionSelected),r=null===c||void 0===c||null===(o=c.permission)||void 0===o?void 0:o.map((function(e,o){return o===t?Object(i.a)(Object(i.a)({},e),{},{isEnable:n}):e}));null===e||void 0===e||e.handleCheckBox(Object(i.a)(Object(i.a)({},c),{},{permission:r}))}(n,null===t||void 0===t||null===(o=t.target)||void 0===o?void 0:o.checked)}})," ","  ".concat(M.a.t("ROLE_PERMISSION.".concat(_.MapMethodToAction["string"===typeof(null===t||void 0===t?void 0:t.method)?null===t||void 0===t||null===(c=t.method)||void 0===c?void 0:c.toLowerCase():String(null===t||void 0===t?void 0:t.method).toLowerCase()])))]})},n)})))})};t.default=function(e){var t=Object(s.useState)(null),n=Object(l.a)(t,2),c=n[0],x=n[1],g=Object(s.useState)(null),R=Object(l.a)(g,2),C=R[0],y=R[1],I=Object(s.useState)(null),P=Object(l.a)(I,2),L=P[0],w=P[1],D=Object(s.useState)(!1),T=Object(l.a)(D,2),B=T[0],G=T[1],U=Object(s.useState)(!1),K=Object(l.a)(U,2),J=(K[0],K[1],Object(s.useState)(null)),F=Object(l.a)(J,2),q=F[0],Y=(F[1],Object(u.i)()),H=Object(s.useState)(!1),V=Object(l.a)(H,2),z=(V[0],V[1],Object(s.useState)(!1)),Q=Object(l.a)(z,2),W=Q[0],X=Q[1],Z=Object(s.useState)(!1),$=Object(l.a)(Z,2),ee=($[0],$[1],d.a.useMemo((function(){return[{title:"".concat(M.a.t("ROLE_PERMISSION.RESOURCE")),field:"description"},{title:"".concat(M.a.t("ROLE_PERMISSION.ACTION")),render:!0},{title:"".concat(M.a.t("ROLE_PERMISSION.GRANT_REVOKE")),isAction:!0}]}),[]));Object(s.useEffect)((function(){Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),(t=Y.roleId)||v.b.error(M.a.t("ROLE_PERMISSION.ROLE_ID_NOT_FOUND")),e.next=5,te(t);case 5:G(!1);case 6:case"end":return e.stop()}}),e)})))()}),[null===Y||void 0===Y?void 0:Y.roleId]);var te=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,i,c,a,s,d,u,j,b,p,h,E,m,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([O.a.getById(t),O.a.getRolePermission(t)]);case 3:n=e.sent,o=Object(l.a)(n,2),i=o[0],c=o[1],x(i),y(c.contents||[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.response)&&(403===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)||401===(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)?v.b.error(M.a.t("RESPONSE_MESSAGE401")):400===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?v.b.error(M.a.t("RESPONSE_MESSAGE400")):409===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)?v.b.error(M.a.t("RESPONSE_MESSAGE409")):404===(null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j?void 0:j.status)?v.b.error(M.a.t("RESPONSE_MESSAGE404")):(null===(b=String(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.error))||void 0===b?void 0:b.includes("ER_DUP_ENTRY"))?v.b.error(M.a.t("ER_DUP_ENTRY")):(null===(E=String(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.error))||void 0===E?void 0:E.includes("ID_NOT_FOUND"))?v.b.error(M.a.t("RESPONSE_MESSAGE404")):v.b.error(M.a.t("RESPONSE_MESSAGE500")));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.name,n=c.value,o=L.permission,i={name:t,value:n,permissions:o},e.next=5,O.a.putById(null===Y||void 0===Y?void 0:Y.roleId,i);case 5:return e.next=7,te(null===Y||void 0===Y?void 0:Y.roleId);case 7:X(!1),v.b.success(M.a.t("admin.SUCCESS"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y.roleId,o={},o=t?Object(i.a)(Object(i.a)({},o),{},{searchKey:t}):o,e.next=5,O.a.getRolePermission(n,o);case 5:c=e.sent,y(c.contents||[]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"page",children:B?Object(o.jsx)(j.a,{}):Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:M.a.t("ROLE_PERMISSION.ROLE_PERMISSION_MANAGE")}),c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("p",{children:[M.a.t("ROLE_PERMISSION.CODE"),": ",c.name]}),Object(o.jsxs)("p",{children:[M.a.t("ROLE_PERMISSION.NAME"),": ",c.value]})]})]}),Object(o.jsx)("div",{children:Object(o.jsx)(h.a,{value:q,onChange:function(e){var t;return oe((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||null)},placeholder:"".concat(M.a.t("ROLE_PERMISSION.RESOURCE_PLACE_HOLDER"))})}),Object(o.jsxs)(b.a,{bordered:!0,children:[Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:null===ee||void 0===ee?void 0:ee.map((function(e,t){return Object(o.jsx)("th",{children:null===e||void 0===e?void 0:e.title},t)}))})}),Object(o.jsx)("tbody",{children:C&&(null===C||void 0===C?void 0:C.map((function(e,t){return Object(o.jsx)("tr",{children:null===ee||void 0===ee?void 0:ee.map((function(n,i){var c;return Object(o.jsxs)("td",{children:[(null===n||void 0===n?void 0:n.field)&&p.get(e,null===n||void 0===n?void 0:n.field,""),(null===n||void 0===n?void 0:n.render)&&(null===e||void 0===e||null===(c=e.permission)||void 0===c?void 0:c.map((function(e,t){var n;return Object(o.jsxs)("div",{style:{padding:"5px 20px"},children:[(null===e||void 0===e?void 0:e.isEnable)?Object(o.jsx)(k.C,{fill:"#2ecc71"}):Object(o.jsx)(k.D,{fill:"#c0392b"}),"  ".concat(M.a.t("ROLE_PERMISSION.".concat(_.MapMethodToAction["string"===typeof(null===e||void 0===e?void 0:e.method)?null===e||void 0===e||null===(n=e.method)||void 0===n?void 0:n.toLowerCase():String(null===e||void 0===e?void 0:e.method).toLowerCase()])))]},t)}))),n.isAction&&Object(o.jsx)("div",{children:Object(o.jsxs)(E.a,{children:[Object(o.jsx)(m.a,{caret:!0,children:M.a.t("ACTION")}),Object(o.jsx)(f.a,{children:Object(o.jsx)(S.a,{onClick:function(){return w(e),void X(!0)},children:M.a.t("EDIT")})})]})})]},"".concat(t,"-").concat(i))}))},"".concat(t,"-"))})))})]}),Object(o.jsx)(N,{modal:W,toggle:function(){return X(!W)},bodyContent:Object(o.jsx)(A,{permissionSelected:L,handleCheckBox:function(e){w(e)}}),handleOkButtonOnClick:ne,handleCancelButtonOnClick:function(){return X(!W)},permission:L})]})})}},652:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(15);var o=n(3),i=(n(2),n(297)),c=n(266),r=n(267),a=n(268),l=n(67),s=(n(222),n(104));function d(e){var t=e.modal,n=e.toggle,d=e.headerTitle,u=e.bodyContent,v=e.handleOkButtonOnClick,O=e.handleCancelButtonOnClick,j=e.isModalDelete,b=void 0!==j&&j,p=e.titleOk,h=void 0===p?"":p,E=e.titleCancel,m=void 0===E?"":E,f=Object(s.a)().t;return Object(o.jsxs)(i.a,{isOpen:t,toggle:n,children:[Object(o.jsx)(c.a,{toggle:n,children:d}),Object(o.jsx)(r.a,{children:u}),Object(o.jsxs)(a.a,{children:[Object(o.jsx)(l.a,{color:"".concat(b?"danger":"primary"),onClick:v,children:f(h||"admin.common.OK")}),Object(o.jsx)(l.a,{color:"warning",onClick:O,children:f(m||"admin.common.CANCEL")})]})]})}},685:function(e,t,n){"use strict";var o=n(13),i=n.n(o),c=n(19),r=n(14),a=n(22),l=n(53),s=n.n(l),d="roles";t.a={getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.a.stringify(Object(r.a)({limit:-1,page:0},e)),n="".concat(d,"?").concat(t);return a.a.get(n)},getList:function(e){var t="".concat(d,"?page=").concat(e.page-1);return e.limit&&(t+="&limit=".concat(e.limit)),e.sorter.sortBy&&e.sorter.sortType&&(t+="&sortBy=".concat(e.sorter.sortBy,"&sortType=").concat(e.sorter.sortType)),e.searchKey&&(t+="&search=".concat(e.searchKey)),null!==e.filter.isDeleted&&(t+="&isDeleted=".concat(e.filter.isDeleted)),a.a.get(t)},getById:function(e){var t="".concat(d,"/").concat(e);return a.a.get(t)},post:function(e){var t="".concat(d);return a.a.post(t,JSON.stringify(e))},putById:function(e,t){var n="".concat(d,"/").concat(e);return a.a.put(n,JSON.stringify(t))},deleteById:function(e){var t="".concat(d,"/").concat(e);return a.a.delete(t)},getRolePermission:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,o,c,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},o="/resources/permission/".concat(t),Object.keys(n).length&&(c=s.a.stringify(Object(r.a)({},n)),o+="?".concat(c)),e.next=5,a.a.get(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=76.defeb27c.chunk.js.map