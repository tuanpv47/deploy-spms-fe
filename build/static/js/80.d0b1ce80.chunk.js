(this["webpackJsonpspms-fe"]=this["webpackJsonpspms-fe"]||[]).push([[80],{605:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return z}));var r=a(3),n=a(14),s=a(13),c=a.n(s),l=a(19),i=a(15),o=a(2),j=a(104),d=a(138),u=a(178),b=a(135),O=a(224),x=a(225),p=a(137),h=a(226),v=a(277),S=a(278),f=a(270),m=a(80),E=a(273),g=a(271),N=a(272),A=a(130),R=a(222),P=a(67),w=a(182),_=a(61),T=(a(854),a(203)),D=a(708),C=a(651),y=a(52),U=a(17),G=a(26),I=a(855),k=a.n(I),L=function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(k.a,{withIcon:!1,buttonText:null===e||void 0===e?void 0:e.title,onChange:e.setImage,label:"",imgExtension:[".jpg",".png"],maxFileSize:5242880,fileSizeError:" file size is too big",fileContainerStyle:{boxShadow:"none",display:"contents"}})})},W=a(22),M={upload:function(){var e=Object(l.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),"/upload-file",e.abrupt("return",W.a.post("/upload-file",a,{headers:{"Content-Type":"multipart/form-data"}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=a(28),H=a(192),Y=a(105);a(12);function z(e){var t,a=Object(j.a)().t,s=Object(U.g)(),I=e.isLogined,k=e.updateProfileLoginedStorage,W=Object(o.useState)("1"),z=Object(i.a)(W,2),J=z[0],V=z[1],X=Object(o.useState)((null===I||void 0===I?void 0:I.firstName)||""),q=Object(i.a)(X,2),B=q[0],K=q[1],Q=Object(o.useState)((null===I||void 0===I?void 0:I.lastName)||""),Z=Object(i.a)(Q,2),$=Z[0],ee=Z[1],te=Object(o.useState)((null===I||void 0===I?void 0:I.username)||""),ae=Object(i.a)(te,2),re=ae[0],ne=ae[1],se=Object(o.useState)(""),ce=Object(i.a)(se,2),le=ce[0],ie=ce[1],oe=Object(o.useState)(""),je=Object(i.a)(oe,2),de=je[0],ue=je[1],be=Object(o.useState)(""),Oe=Object(i.a)(be,2),xe=Oe[0],pe=Oe[1],he=Object(o.useState)(""),ve=Object(i.a)(he,2),Se=ve[0],fe=(ve[1],Object(o.useState)(null)),me=Object(i.a)(fe,2),Ee=me[0],ge=me[1],Ne=Object(o.useState)({color:"danger",isOpen:!1,messages:[]}),Ae=Object(i.a)(Ne,2),Re=Ae[0],Pe=Ae[1],we=function(){var e=Object(l.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={firstName:B,lastName:$,username:re},e.prev=2,e.next=5,y.a.updateProfile(I.id,r);case 5:"UPDATE_USER_SUCCESSFULLY"===e.sent.message?(k(r),G.b.success(a("admin.UPDATE_SUCCESS"))):G.b.error(a("admin.UPDATE_FAILED")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),400===e.t0.response.status?G.b.error(a("RESPONSE_MESSAGE400")):G.b.error(a("RESPONSE_MESSAGE500"));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(l.a)(c.a.mark((function e(t){var r,n,l,i,o,j,d,u,b,O,x,p,h,v,S,f,m,E,g,N,A,R,P,w,_;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object(Y.d)(String(de))){e.next=4;break}return Pe({color:"danger",isOpen:!0,messages:[a("PASSWORD_LENGTH_WARNING")]}),e.abrupt("return");case 4:if(Object(Y.d)(String(xe))){e.next=7;break}return Pe({color:"danger",isOpen:!0,messages:[a("PASSWORD_LENGTH_WARNING")]}),e.abrupt("return");case 7:if(de!==xe){e.next=21;break}return r={password:le,newPassword:de},e.prev=9,e.next=12,y.a.changePassword(I.id,r);case 12:"UPDATE_USER_SUCCESSFULLY"===(n=e.sent).message?(G.b.success(a(n.message)),s.push("/")):(null===(l=err)||void 0===l?void 0:l.response)&&(403===(null===(i=err)||void 0===i||null===(o=i.response)||void 0===o?void 0:o.status)||"NOT_OWNER"===String(null===(j=err)||void 0===j||null===(d=j.response)||void 0===d?void 0:d.message)?G.b.error(a("RESPONSE_MESSAGE403")):401===(null===(u=err)||void 0===u||null===(b=u.response)||void 0===b?void 0:b.status)?G.b.error(a("RESPONSE_MESSAGE401")):400===(null===(O=err)||void 0===O||null===(x=O.response)||void 0===x?void 0:x.status)?G.b.error(a("RESPONSE_MESSAGE400")):409===(null===(p=err)||void 0===p||null===(h=p.response)||void 0===h?void 0:h.status)?G.b.error(a("RESPONSE_MESSAGE409")):404===(null===(v=err)||void 0===v||null===(S=v.response)||void 0===S?void 0:S.status)?G.b.error(a("RESPONSE_MESSAGE404")):(null===(f=String(null===(m=err)||void 0===m||null===(E=m.response)||void 0===E||null===(g=E.data)||void 0===g?void 0:g.error))||void 0===f?void 0:f.includes("ER_DUP_ENTRY"))?G.b.error(a("ER_DUP_ENTRY")):(null===(N=String(null===(A=err)||void 0===A||null===(R=A.response)||void 0===R||null===(P=R.data)||void 0===P?void 0:P.error))||void 0===N?void 0:N.includes("ID_NOT_FOUND"))?G.b.error(a("RESPONSE_MESSAGE404")):G.b.error(a("RESPONSE_MESSAGE500"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),"PASSWORD_INCORRECT"===(null===e.t0||void 0===e.t0||null===(w=e.t0.response)||void 0===w||null===(_=w.data)||void 0===_?void 0:_.message)?G.b.error(a("PASSWORD_INCORRECT")):G.b.error(a("RESPONSE_MESSAGE500"));case 19:e.next=22;break;case 21:Pe({color:"danger",isOpen:!0,messages:[a("admin.PASSWORD_MATCH_WARNING")]});case 22:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(l.a)(c.a.mark((function e(t){var r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.upload(t);case 3:r=e.sent,s=r.url,l=F.a.currentUserValue,localStorage.removeItem("curUser"),localStorage.setItem("curUser",JSON.stringify(Object(n.a)(Object(n.a)({},l),{},{avatar:s}))),window.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),G.b.error(a("RESPONSE_MESSAGE500"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ee){e.next=3;break}return e.next=3,Te(Ee[0]);case 3:case"end":return e.stop()}}),e)})))()}),[Ee]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D.a,{currentItem:a("UPDATE_PROFILE")}),Object(r.jsx)(d.a,{className:"cardT shadow-sm",children:Object(r.jsxs)(u.a,{children:[Object(r.jsx)(b.a,{lg:3,className:"contentLeft",children:Object(r.jsx)("div",{className:"tabsbar",children:Object(r.jsxs)(O.a,{vertical:!0,children:[Object(r.jsx)(x.a,{children:Object(r.jsx)(p.a,{fluid:!0,className:"1"===J?"activeT":"",onClick:function(){return V("1")},children:Object(r.jsx)(h.a,{type:"button",children:a("UPDATE_PROFILE")})})}),Object(r.jsx)(x.a,{children:Object(r.jsx)(p.a,{fluid:!0,className:"2"===J?"activeT":"",onClick:function(){return V("2")},children:Object(r.jsx)(h.a,{type:"button",children:a("CHANGE_PASSWORD")})})})]})})}),Object(r.jsx)(b.a,{lg:9,children:Object(r.jsx)("div",{className:"contentRight",children:Object(r.jsxs)(v.a,{activeTab:J,children:[Object(r.jsx)(S.a,{tabId:"1",children:Object(r.jsx)(p.a,{children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(m.a,{row:!0,children:[Object(r.jsx)("img",{src:(null===I||void 0===I?void 0:I.avatar)?"".concat(null===I||void 0===I?void 0:I.avatar):T.a,className:"avatar",width:"100px",height:"100px",alt:"Avatar"}),Object(r.jsxs)("div",{className:"mt-3",children:[Object(r.jsx)("h4",{children:I.firstName+" "+I.lastName}),Object(r.jsx)(L,{title:a("CHANGEAVATAR"),setImage:ge})]})]}),Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-5",children:[Object(r.jsx)(E.a,{for:"firstname",lg:2,children:a("FIRST_NAME")}),Object(r.jsx)(b.a,{lg:4,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.U,{})})}),Object(r.jsx)(R.a,{type:"text",id:"firstname",value:B,onChange:function(e){K(e.target.value)},placeholder:"First name..."})]})}),Object(r.jsx)(E.a,{for:"lastname",lg:2,className:"text-right",children:a("LAST_NAME")}),Object(r.jsx)(b.a,{lg:4,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.U,{})})}),Object(r.jsx)(R.a,{type:"text",id:"lastname",value:$,onChange:function(e){ee(e.target.value)},placeholder:"Last name..."})]})})]}),Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-3",children:[Object(r.jsxs)(E.a,{for:"username",lg:2,children:[a("USERNAME")," ",Object(r.jsx)(C.a,{})]}),Object(r.jsx)(b.a,{lg:10,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.P,{})})}),Object(r.jsx)(R.a,{type:"search",id:"username",placeholder:"Username...",onChange:function(e){ne(e.target.value)},value:re})]})})]}),Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-3",children:[Object(r.jsx)(E.a,{for:"role",lg:2,children:a("ROLE")}),Object(r.jsx)(b.a,{lg:10,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.X,{})})}),Object(r.jsx)(R.a,{type:"search",id:"role",value:(null===I||void 0===I||null===(t=I.role)||void 0===t?void 0:t.name)||"",readOnly:!0})]})})]}),Object(r.jsxs)(P.a,{onClick:we,className:"buttonOrange2 mt-4",children:[Object(r.jsx)(_.m,{})," ",a("UPDATE")]})]})})}),Object(r.jsx)(S.a,{tabId:"2",children:Object(r.jsxs)(p.a,{className:"mt-5",children:[Re&&Object(r.jsx)(H.a,{color:null===Re||void 0===Re?void 0:Re.color,isOpen:null===Re||void 0===Re?void 0:Re.isOpen,messages:null===Re||void 0===Re?void 0:Re.messages}),Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-3",children:[Object(r.jsxs)(E.a,{for:"oldPassword",lg:3,children:[a("OLDPASSWORD")," ",Object(r.jsx)(C.a,{})]}),Object(r.jsx)(b.a,{lg:9,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.u,{})})}),Object(r.jsx)(R.a,{type:"password",id:"oldpassword",placeholder:"".concat(a("OLDPASSWORD"),"..."),value:le,onChange:function(e){Pe(null),ie(e.target.value)}})]})})]}),Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-3",children:[Object(r.jsxs)(E.a,{for:"password",lg:3,children:[a("PASSWORD")," ",Object(r.jsx)(C.a,{})]}),Object(r.jsx)(b.a,{lg:9,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.u,{})})}),Object(r.jsx)(R.a,{type:"password",id:"password",placeholder:"".concat(a("PASSWORD"),"..."),value:de,onChange:function(e){Pe(null),ue(e.target.value)}})]})})]}),Object(r.jsxs)(m.a,{row:!0,className:"text-left mt-3",children:[Object(r.jsxs)(E.a,{for:"password2",lg:3,children:[a("PASSWORD_AGAINST")," ",Object(r.jsx)(C.a,{})]}),Object(r.jsx)(b.a,{lg:9,children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(N.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(_.u,{})})}),Object(r.jsx)(R.a,{type:"password",id:"password2",placeholder:"".concat(a("PASSWORD_AGAINST"),"..."),value:xe,onChange:function(e){Pe(null),pe(e.target.value)}})]})})]}),Object(r.jsxs)(P.a,{onClick:_e,className:"buttonOrange2 mt-4",children:[Object(r.jsx)(_.o,{})," ",a("CHANGE")]}),Object(r.jsx)(w.a,{color:"danger",children:Se})]})]})})]})})})]})})]})}},651:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(3);a(2);function n(){return Object(r.jsx)("span",{style:{color:"red"},children:"(*)"})}},708:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(3),n=(a(2),a(69)),s=a(259),c=a(260),l=a(61),i=a(6);function o(e){var t=e.items,a=e.currentItem;return Object(r.jsxs)(s.a,{children:[Object(r.jsx)(c.a,{active:!a,children:Object(r.jsx)(n.b,{to:i.b.WELCOME,children:Object(r.jsx)(l.s,{})})}),t&&t.map((function(e){var t=e.href,a=e.title;return Object(r.jsx)(c.a,{children:Object(r.jsx)(n.b,{to:t,children:a})})})),a&&Object(r.jsx)(c.a,{active:!0,children:a})]})}},854:function(e,t,a){}}]);
//# sourceMappingURL=80.d0b1ce80.chunk.js.map