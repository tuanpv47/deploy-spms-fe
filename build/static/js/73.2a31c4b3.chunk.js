(this["webpackJsonpspms-fe"]=this["webpackJsonpspms-fe"]||[]).push([[73],{614:function(e,t,n){"use strict";n.r(t);var r=n(3),s=n(14),a=n(13),i=n.n(a),o=n(19),c=n(15),l=n(2),d=n(104),u=n(12),E=n(53),v=n.n(E),S=n(653),O=n(654),b=n(17),j=(n(998),n(26)),p=n(650);n(999);function _(e){var t=e.headerTitle;return Object(r.jsx)("div",{className:"page-header",children:Object(r.jsx)("div",{className:"d-flex flex-wrap justify-content-between",children:Object(r.jsx)("h1",{children:t.toUpperCase()})})})}var m=n(716),h=n(61),N=n(270),x=n(80),R=n(273),f=n(271),g=n(272),A=n(130),D=n(222),T=n(182),M=n(67),P=n(651),y=n(192),G=n(62),I=n(6);t.default=function(e){e.values,e.handleChange,e.resetForm,e.errors;var t=Object(d.a)().t,n=Object(b.g)(),a=Object(b.h)(),E=Object(l.useState)(null),L=Object(c.a)(E,2),C=L[0],k=L[1],w=Object(l.useState)(!1),U=Object(c.a)(w,2),F=U[0],B=U[1],Y=Object(l.useState)({ma:"",ten:""}),W=Object(c.a)(Y,2),H=W[0],J=W[1],V=Object(l.useState)({color:"danger",isOpen:!1,messages:[]}),q=Object(c.a)(V,2),z=q[0],K=(q[1],Object(l.useState)(!1)),Q=Object(c.a)(K,2),X=Q[0],Z=Q[1];Object(l.useEffect)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=v.a.parse(window.location.search)).id&&(k(t.id),B(!0),$(t.id));case 2:case"end":return e.stop()}}),e)}))),[a]);var $=function(){var e=Object(o.a)(i.a.mark((function e(n){var r,s,a,o,c,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,m.a.getById(n);case 4:r=e.sent,J({ma:r.ma,ten:r.ten}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&(403===(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)||"NOT_OWNER"===String(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.message)?j.b.error(t("RESPONSE_MESSAGE403")):401===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?j.b.error(t("RESPONSE_MESSAGE401")):400===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)?j.b.error(t("RESPONSE_MESSAGE400")):409===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?j.b.error(t("RESPONSE_MESSAGE409")):404===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?j.b.error(t("RESPONSE_MESSAGE404")):j.b.error(t("RESPONSE_MESSAGE500")));case 11:return e.prev=11,Z(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(o.a)(i.a.mark((function e(r,a){var o,c,l,d,u,E,v,S,O,b,p,_,h,N,x,R,f,g,A,D,T,M,P,y,G,L,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(!F){e.next=16;break}return o=Object(s.a)({},r),e.prev=4,e.next=7,m.a.putById(C,o);case 7:200===e.sent.status&&(j.b.success(t("admin.UPDATE_SUCCESS")),$(C)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),(null===e.t0||void 0===e.t0?void 0:e.t0.response)&&(403===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)||"NOT_OWNER"===String(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.message)?j.b.error(t("RESPONSE_MESSAGE403")):401===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?j.b.error(t("RESPONSE_MESSAGE401")):400===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)?j.b.error(t("RESPONSE_MESSAGE400")):409===(null===e.t0||void 0===e.t0||null===(E=e.t0.response)||void 0===E?void 0:E.status)?j.b.error(t("RESPONSE_MESSAGE409")):404===(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status)?j.b.error(t("RESPONSE_MESSAGE404")):(null===(S=String(null===e.t0||void 0===e.t0||null===(O=e.t0.response)||void 0===O||null===(b=O.data)||void 0===b?void 0:b.error))||void 0===S?void 0:S.includes("ER_DUP_ENTRY"))?j.b.error(t("ER_DUP_ENTRY")):(null===(p=String(null===e.t0||void 0===e.t0||null===(_=e.t0.response)||void 0===_||null===(h=_.data)||void 0===h?void 0:h.error))||void 0===p?void 0:p.includes("ID_NOT_FOUND"))?j.b.error(t("RESPONSE_MESSAGE404")):j.b.error(t("RESPONSE_MESSAGE500")));case 14:e.next=28;break;case 16:return N=Object(s.a)({},r),e.prev=17,e.next=20,m.a.post(N);case 20:x=e.sent,j.b.success(t("admin.ADD_SUCCESS")),n.push("".concat(I.b.ADMIN_TRAINING_SYSTEM_EDIT,"?id=").concat(x.id)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(17),(null===e.t1||void 0===e.t1?void 0:e.t1.response)&&(403===(null===e.t1||void 0===e.t1||null===(R=e.t1.response)||void 0===R?void 0:R.status)||"NOT_OWNER"===String(null===e.t1||void 0===e.t1||null===(f=e.t1.response)||void 0===f?void 0:f.message)?j.b.error(t("RESPONSE_MESSAGE403")):401===(null===e.t1||void 0===e.t1||null===(g=e.t1.response)||void 0===g?void 0:g.status)?j.b.error(t("RESPONSE_MESSAGE401")):400===(null===e.t1||void 0===e.t1||null===(A=e.t1.response)||void 0===A?void 0:A.status)?j.b.error(t("RESPONSE_MESSAGE400")):409===(null===e.t1||void 0===e.t1||null===(D=e.t1.response)||void 0===D?void 0:D.status)?j.b.error(t("RESPONSE_MESSAGE409")):404===(null===e.t1||void 0===e.t1||null===(T=e.t1.response)||void 0===T?void 0:T.status)?j.b.error(t("RESPONSE_MESSAGE404")):(null===(M=String(null===e.t1||void 0===e.t1||null===(P=e.t1.response)||void 0===P||null===(y=P.data)||void 0===y?void 0:y.error))||void 0===M?void 0:M.includes("ER_DUP_ENTRY"))?j.b.error(t("ER_DUP_ENTRY")):(null===(G=String(null===e.t1||void 0===e.t1||null===(L=e.t1.response)||void 0===L||null===(k=L.data)||void 0===k?void 0:k.error))||void 0===G?void 0:G.includes("ID_NOT_FOUND"))?j.b.error(t("RESPONSE_MESSAGE404")):j.b.error(t("RESPONSE_MESSAGE500")));case 28:case"end":return e.stop()}}),e,null,[[4,11],[17,25]])})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(o.a)(i.a.mark((function e(r){var s,a,o,c,l,d,u,E,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,m.a.deleteById(C);case 4:200===e.sent.status&&(j.b.success(t("admin.common.DELETED")),n.push("".concat(I.b.ADMIN_TRAINING_SYSTEM_LIST))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&(403===(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)||"NOT_OWNER"===String(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.message)?j.b.error(t("RESPONSE_MESSAGE403")):401===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?j.b.error(t("RESPONSE_MESSAGE401")):400===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)?j.b.error(t("DELETE_ERROR")+": "+t("RESPONSE_MESSAGE400")):409===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?j.b.error(t("DELETE_ERROR")+": "+t("RESPONSE_MESSAGE409")):404===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?j.b.error(t("DELETE_ERROR")+": "+t("RESPONSE_MESSAGE404")):(null===(u=String(null===e.t0||void 0===e.t0||null===(E=e.t0.response)||void 0===E||null===(v=E.data)||void 0===v?void 0:v.error))||void 0===u?void 0:u.includes("ID_NOT_FOUND"))?j.b.error(t("RESPONSE_MESSAGE404")):j.b.error(t("DELETE_ERROR")+": "+t("RESPONSE_MESSAGE500")));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"page",children:[X&&Object(r.jsx)(G.a,{}),Object(r.jsx)(p.a,{currentItem:t(F?"admin.training_system_edit.UPDATE":"admin.training_system_edit.ADD"),items:[{href:I.b.ADMIN_TRAINING_SYSTEM_LIST,title:t("admin.training_system_list.LIST")}]}),Object(r.jsx)(_,{headerTitle:t(F?"admin.training_system_edit.UPDATE":"admin.training_system_edit.ADD")}),Object(r.jsx)("div",{className:"page-content",children:Object(r.jsx)(S.c,{initialValues:H,enableReinitialize:!0,validationSchema:O.b().shape({ma:O.c().required(u.a.t("REQUIRED_FIELD_WARNING")),ten:O.c().required(u.a.t("REQUIRED_FIELD_WARNING")).min(5,u.a.t("TRAINING_SYSTEM_NAME_LENGTH"))}),children:function(e){var n=e.values,s=e.errors,a=e.dirty,i=e.isValid,o=e.handleChange,c=e.handleReset;e.setFieldValue;return Object(r.jsxs)(N.a,{children:[Object(r.jsx)(y.a,{color:z.color,isOpen:z.isOpen,messages:z.messages}),Object(r.jsxs)(x.a,{className:"row",children:[Object(r.jsxs)(R.a,{for:"value",className:"col-lg-3",children:[t("admin.training_system_list.CODE")," ",Object(r.jsx)(P.a,{})]}),Object(r.jsxs)("div",{className:"col-lg-6",children:[Object(r.jsxs)(f.a,{children:[Object(r.jsx)(g.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(h.i,{})})}),Object(r.jsx)(D.a,{type:"text",name:"ma",placeholder:t("admin.training_system_edit.CODE_PLACEHOLDER"),value:n.ma,onChange:o,invalid:s.ma})]}),s.ma&&Object(r.jsx)(T.a,{color:"danger",children:s.ma})]})]})," ",Object(r.jsx)("br",{}),Object(r.jsxs)(x.a,{className:"row",children:[Object(r.jsxs)(R.a,{for:"name",className:"col-lg-3",children:[t("admin.training_system_list.NAME")," ",Object(r.jsx)(P.a,{})]}),Object(r.jsxs)("div",{className:"col-lg-6",children:[Object(r.jsxs)(f.a,{children:[Object(r.jsx)(g.a,{addonType:"prepend",children:Object(r.jsx)(A.a,{children:Object(r.jsx)(h.P,{})})}),Object(r.jsx)(D.a,{type:"text",name:"ten",placeholder:t("admin.training_system_edit.NAME_PLACEHOLDER"),value:n.ten,onChange:o,invalid:s.ten})]}),s.ten&&Object(r.jsx)(T.a,{color:"danger",children:s.ten})]})]})," ",Object(r.jsx)("br",{}),Object(r.jsxs)(x.a,{children:[Object(r.jsx)(M.a,{color:"success",disabled:F?!i:!(i&&a),onClick:function(){return ee(n,F?i:i&&a)},children:F?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.o,{})," ",t("admin.common.UPDATE")]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.z,{})," ",t("admin.common.ADD")]})}),"\u2003",F&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(M.a,{onClick:c,children:[Object(r.jsx)(h.M,{})," ",t("admin.common.REFRESH")]}),"\u2003",Object(r.jsxs)(M.a,{color:"danger",onClick:te,children:[Object(r.jsx)(h.R,{})," ",t("admin.common.DELETE")]})]})]})]})}})})]})}},650:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),s=(n(2),n(69)),a=n(259),i=n(260),o=n(61),c=n(6);function l(e){var t=e.items,n=e.currentItem;return Object(r.jsxs)(a.a,{children:[Object(r.jsx)(i.a,{active:!n,children:Object(r.jsx)(s.b,{to:c.b.WELCOME,children:Object(r.jsx)(o.s,{})})}),t&&t.map((function(e){var t=e.href,n=e.title;return Object(r.jsx)(i.a,{children:Object(r.jsx)(s.b,{to:t,children:n})})})),n&&Object(r.jsx)(i.a,{active:!0,children:n})]})}},651:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3);n(2);function s(){return Object(r.jsx)("span",{style:{color:"red"},children:"(*)"})}},716:function(e,t,n){"use strict";var r=n(14),s=n(22),a=n(53),i=n.n(a);t.a={getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.a.stringify(Object(r.a)({limit:-1,page:0},e)),n="he-dao-tao?".concat(t);return s.a.get(n)},getList:function(e){var t="he-dao-tao?page=".concat(e.page-1,"&limit=").concat(e.limit);return e.sorter.sortBy&&e.sorter.sortType&&(t+="&sortBy=".concat(e.sorter.sortBy,"&sortType=").concat(e.sorter.sortType)),e.searchKey&&(t+="&search=".concat(e.searchKey)),null!==e.filter.isDeleted&&(t+="&isDeleted=".concat(e.filter.isDeleted)),s.a.get(t)},getById:function(e){var t="he-dao-tao/".concat(e);return s.a.get(t)},post:function(e){return s.a.post("he-dao-tao",JSON.stringify(e))},putById:function(e,t){var n="he-dao-tao/".concat(e);return s.a.put(n,JSON.stringify(t))},deleteById:function(e){var t="he-dao-tao/".concat(e);return s.a.delete(t)}}},998:function(e,t,n){},999:function(e,t,n){}}]);
//# sourceMappingURL=73.2a31c4b3.chunk.js.map