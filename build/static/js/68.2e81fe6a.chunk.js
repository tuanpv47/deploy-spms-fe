(this["webpackJsonpspms-fe"]=this["webpackJsonpspms-fe"]||[]).push([[68],{611:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return L}));var n=r(3),s=r(13),o=r.n(s),a=r(19),i=r(15),c=r(2),l=r(104),d=r(17),u=r(26),v=r(61),E=r(270),O=r(80),S=r(273),b=r(271),j=r(272),p=r(130),h=r(222),m=r(182),_=r(67),x=r(53),R=r.n(x),f=r(653),N=r(654),g=(r(967),r(6)),A=r(685),D=r(192),P=r(650),M=r(62),T=r(651);r(968);function y(e){var t=e.headerTitle;return Object(n.jsx)("div",{className:"page-header",children:Object(n.jsx)("div",{className:"d-flex flex-wrap justify-content-between",children:Object(n.jsx)("h1",{children:t.toUpperCase()})})})}var G=r(12);function L(){var e=Object(l.a)().t,t=Object(d.g)(),r=Object(d.h)(),s=Object(c.useState)(null),x=Object(i.a)(s,2),L=x[0],I=x[1],k=Object(c.useState)(!1),w=Object(i.a)(k,2),U=w[0],C=w[1],B=Object(c.useState)({value:"",name:""}),F=Object(i.a)(B,2),W=F[0],J=F[1],Y=Object(c.useState)({color:"danger",isOpen:!1,messages:[]}),H=Object(i.a)(Y,2),q=H[0],z=H[1],K=Object(c.useState)(!1),Q=Object(i.a)(K,2),V=Q[0],X=Q[1];Object(c.useEffect)(Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=R.a.parse(window.location.search)).id&&(I(t.id),C(!0),Z(t.id));case 2:case"end":return e.stop()}}),e)}))),[r]);var Z=function(){var t=Object(a.a)(o.a.mark((function t(r){var n,s,a,i,c,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),t.prev=1,t.next=4,A.a.getById(r);case 4:n=t.sent,J({value:void 0!==n.value&&n.value.toString(),name:n.name}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.response&&(403===(null===t.t0||void 0===t.t0||null===(s=t.t0.response)||void 0===s?void 0:s.status)||"NOT_OWNER"===String(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.message)?u.b.error(e("RESPONSE_MESSAGE403")):401===(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i?void 0:i.status)?u.b.error(e("RESPONSE_MESSAGE401")):400===(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c?void 0:c.status)?u.b.error(e("RESPONSE_MESSAGE400")):409===(null===t.t0||void 0===t.t0||null===(l=t.t0.response)||void 0===l?void 0:l.status)?u.b.error(e("RESPONSE_MESSAGE409")):404===(null===t.t0||void 0===t.t0||null===(d=t.t0.response)||void 0===d?void 0:d.status)?u.b.error(e("RESPONSE_MESSAGE404")):u.b.error(e("RESPONSE_MESSAGE500")));case 11:return t.prev=11,X(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),$=function(){var r=Object(a.a)(o.a.mark((function r(n,s){var a,i,c,l,d,v,E,O,S,b,j,p,h,m,_,x,R,f,N,D,P,M,T,y,G,I,k;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s){r.next=2;break}return r.abrupt("return");case 2:if(!U){r.next=16;break}return a=n,r.prev=4,r.next=7,A.a.putById(L,a);case 7:200===r.sent.status&&(z({color:"success",isOpen:!0,messages:[e("admin.UPDATE_SUCCESS")]}),Z(L)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),(null===r.t0||void 0===r.t0?void 0:r.t0.response)&&(403===(null===r.t0||void 0===r.t0||null===(i=r.t0.response)||void 0===i?void 0:i.status)||"NOT_OWNER"===String(null===r.t0||void 0===r.t0||null===(c=r.t0.response)||void 0===c?void 0:c.message)?u.b.error(e("RESPONSE_MESSAGE403")):401===(null===r.t0||void 0===r.t0||null===(l=r.t0.response)||void 0===l?void 0:l.status)?u.b.error(e("RESPONSE_MESSAGE401")):400===(null===r.t0||void 0===r.t0||null===(d=r.t0.response)||void 0===d?void 0:d.status)?u.b.error(e("RESPONSE_MESSAGE400")):409===(null===r.t0||void 0===r.t0||null===(v=r.t0.response)||void 0===v?void 0:v.status)?u.b.error(e("RESPONSE_MESSAGE409")):404===(null===r.t0||void 0===r.t0||null===(E=r.t0.response)||void 0===E?void 0:E.status)?u.b.error(e("RESPONSE_MESSAGE404")):(null===(O=String(null===r.t0||void 0===r.t0||null===(S=r.t0.response)||void 0===S||null===(b=S.data)||void 0===b?void 0:b.error))||void 0===O?void 0:O.includes("ER_DUP_ENTRY"))?u.b.error(e("ER_DUP_ENTRY")):(null===(j=String(null===r.t0||void 0===r.t0||null===(p=r.t0.response)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.error))||void 0===j?void 0:j.includes("ID_NOT_FOUND"))?u.b.error(e("RESPONSE_MESSAGE404")):u.b.error(e("RESPONSE_MESSAGE500")));case 14:r.next=27;break;case 16:return m=n,r.prev=17,r.next=20,A.a.post(m);case 20:_=r.sent,t.push("".concat(g.b.ADMIN_ROLE_EDIT,"?id=").concat(_.id)),r.next=27;break;case 24:r.prev=24,r.t1=r.catch(17),(null===r.t1||void 0===r.t1?void 0:r.t1.response)&&(403===(null===r.t1||void 0===r.t1||null===(x=r.t1.response)||void 0===x?void 0:x.status)||"NOT_OWNER"===String(null===r.t1||void 0===r.t1||null===(R=r.t1.response)||void 0===R?void 0:R.message)?u.b.error(e("RESPONSE_MESSAGE403")):401===(null===r.t1||void 0===r.t1||null===(f=r.t1.response)||void 0===f?void 0:f.status)?u.b.error(e("RESPONSE_MESSAGE401")):400===(null===r.t1||void 0===r.t1||null===(N=r.t1.response)||void 0===N?void 0:N.status)?u.b.error(e("RESPONSE_MESSAGE400")):409===(null===r.t1||void 0===r.t1||null===(D=r.t1.response)||void 0===D?void 0:D.status)?u.b.error(e("RESPONSE_MESSAGE409")):404===(null===r.t1||void 0===r.t1||null===(P=r.t1.response)||void 0===P?void 0:P.status)?u.b.error(e("RESPONSE_MESSAGE404")):(null===(M=String(null===r.t1||void 0===r.t1||null===(T=r.t1.response)||void 0===T||null===(y=T.data)||void 0===y?void 0:y.error))||void 0===M?void 0:M.includes("ER_DUP_ENTRY"))?u.b.error(e("ER_DUP_ENTRY")):(null===(G=String(null===r.t1||void 0===r.t1||null===(I=r.t1.response)||void 0===I||null===(k=I.data)||void 0===k?void 0:k.error))||void 0===G?void 0:G.includes("ID_NOT_FOUND"))?u.b.error(e("RESPONSE_MESSAGE404")):u.b.error(e("RESPONSE_MESSAGE500")));case 27:case"end":return r.stop()}}),r,null,[[4,11],[17,24]])})));return function(e,t){return r.apply(this,arguments)}}(),ee=function(){var r=Object(a.a)(o.a.mark((function r(n){var s,a,i,c,l,d,v,E,O;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,r.next=4,A.a.deleteById(L);case 4:200===r.sent.status&&(u.b.success(e("admin.common.DELETED")),t.push("".concat(g.b.ADMIN_ROLE_LIST))),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),r.t0.response&&(403===(null===r.t0||void 0===r.t0||null===(s=r.t0.response)||void 0===s?void 0:s.status)||"NOT_OWNER"===String(null===r.t0||void 0===r.t0||null===(a=r.t0.response)||void 0===a?void 0:a.message)?u.b.error(e("RESPONSE_MESSAGE403")):401===(null===r.t0||void 0===r.t0||null===(i=r.t0.response)||void 0===i?void 0:i.status)?u.b.error(e("RESPONSE_MESSAGE401")):400===(null===r.t0||void 0===r.t0||null===(c=r.t0.response)||void 0===c?void 0:c.status)?u.b.error(e("DELETE_ERROR")+": "+e("RESPONSE_MESSAGE400")):409===(null===r.t0||void 0===r.t0||null===(l=r.t0.response)||void 0===l?void 0:l.status)?u.b.error(e("DELETE_ERROR")+": "+e("RESPONSE_MESSAGE409")):404===(null===r.t0||void 0===r.t0||null===(d=r.t0.response)||void 0===d?void 0:d.status)?u.b.error(e("DELETE_ERROR")+": "+e("RESPONSE_MESSAGE404")):(null===(v=String(null===r.t0||void 0===r.t0||null===(E=r.t0.response)||void 0===E||null===(O=E.data)||void 0===O?void 0:O.error))||void 0===v?void 0:v.includes("ID_NOT_FOUND"))?u.b.error(e("RESPONSE_MESSAGE404")):u.b.error(e("DELETE_ERROR")+": "+e("RESPONSE_MESSAGE500")));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"page",children:[V&&Object(n.jsx)(M.a,{}),Object(n.jsx)(P.a,{currentItem:e(U?"admin.role_edit.UPDATE_ROLE":"admin.role_edit.ADD_ROLE"),items:[{href:g.b.ADMIN_ROLE_LIST,title:e("admin.role_list.ROLE_LIST")}]}),Object(n.jsx)(y,{headerTitle:e(U?"admin.role_edit.UPDATE_ROLE":"admin.role_edit.ADD_ROLE")}),Object(n.jsx)("div",{className:"page-content",children:Object(n.jsx)(f.c,{initialValues:W,enableReinitialize:!0,validationSchema:N.b().shape({value:N.c().required(G.a.t("REQUIRED_FIELD_WARNING")),name:N.c().required(G.a.t("REQUIRED_FIELD_WARNING"))}),children:function(t){var r=t.values,s=t.errors,o=t.dirty,a=t.isValid,i=t.handleChange,c=t.handleReset;return Object(n.jsxs)(E.a,{children:[Object(n.jsx)(D.a,{color:q.color,isOpen:q.isOpen,messages:q.messages}),Object(n.jsxs)(O.a,{className:"row",children:[Object(n.jsxs)(S.a,{for:"value",className:"col-lg-3",children:[e("admin.role_edit.CODE")," ",Object(n.jsx)(T.a,{})]}),Object(n.jsxs)("div",{className:"col-lg-6",children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(j.a,{addonType:"prepend",children:Object(n.jsx)(p.a,{children:Object(n.jsx)(v.i,{})})}),Object(n.jsx)(h.a,{type:"text",name:"name",placeholder:e("admin.role_edit.CODE_PLACEHOLDER"),value:r.name,onChange:i,invalid:s.name,readOnly:U})]}),s.name&&Object(n.jsx)(m.a,{color:"danger",children:s.name})]})]})," ",Object(n.jsx)("br",{}),Object(n.jsxs)(O.a,{className:"row",children:[Object(n.jsxs)(S.a,{for:"name",className:"col-lg-3",children:[e("admin.role_edit.NAME")," ",Object(n.jsx)(T.a,{})]}),Object(n.jsxs)("div",{className:"col-lg-6",children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(j.a,{addonType:"prepend",children:Object(n.jsx)(p.a,{children:Object(n.jsx)(v.P,{})})}),Object(n.jsx)(h.a,{type:"text",name:"value",placeholder:e("admin.role_edit.NAME_PLACEHOLDER"),value:r.value,onChange:i,invalid:s.value})]}),s.value&&Object(n.jsx)(m.a,{color:"danger",children:s.value})]})]})," ",Object(n.jsx)("br",{}),Object(n.jsxs)(O.a,{children:[Object(n.jsx)(_.a,{color:"success",disabled:U?!a:!(a&&o),onClick:function(){return $(r,U?a:a&&o)},children:U?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v.o,{})," ",e("admin.common.UPDATE")]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v.z,{})," ",e("admin.common.ADD")]})}),"\u2003",U&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(_.a,{onClick:c,children:[Object(n.jsx)(v.M,{})," ",e("admin.common.REFRESH")]}),"\u2003",Object(n.jsxs)(_.a,{color:"danger",onClick:ee,children:[Object(n.jsx)(v.R,{})," ",e("admin.common.DELETE")]})]})]})]})}})})]})}},650:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(3),s=(r(2),r(69)),o=r(259),a=r(260),i=r(61),c=r(6);function l(e){var t=e.items,r=e.currentItem;return Object(n.jsxs)(o.a,{children:[Object(n.jsx)(a.a,{active:!r,children:Object(n.jsx)(s.b,{to:c.b.WELCOME,children:Object(n.jsx)(i.s,{})})}),t&&t.map((function(e){var t=e.href,r=e.title;return Object(n.jsx)(a.a,{children:Object(n.jsx)(s.b,{to:t,children:r})})})),r&&Object(n.jsx)(a.a,{active:!0,children:r})]})}},651:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(3);r(2);function s(){return Object(n.jsx)("span",{style:{color:"red"},children:"(*)"})}},685:function(e,t,r){"use strict";var n=r(13),s=r.n(n),o=r(19),a=r(14),i=r(22),c=r(53),l=r.n(c),d="roles";t.a={getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.a.stringify(Object(a.a)({limit:-1,page:0},e)),r="".concat(d,"?").concat(t);return i.a.get(r)},getList:function(e){var t="".concat(d,"?page=").concat(e.page-1);return e.limit&&(t+="&limit=".concat(e.limit)),e.sorter.sortBy&&e.sorter.sortType&&(t+="&sortBy=".concat(e.sorter.sortBy,"&sortType=").concat(e.sorter.sortType)),e.searchKey&&(t+="&search=".concat(e.searchKey)),null!==e.filter.isDeleted&&(t+="&isDeleted=".concat(e.filter.isDeleted)),i.a.get(t)},getById:function(e){var t="".concat(d,"/").concat(e);return i.a.get(t)},post:function(e){var t="".concat(d);return i.a.post(t,JSON.stringify(e))},putById:function(e,t){var r="".concat(d,"/").concat(e);return i.a.put(r,JSON.stringify(t))},deleteById:function(e){var t="".concat(d,"/").concat(e);return i.a.delete(t)},getRolePermission:function(){var e=Object(o.a)(s.a.mark((function e(t){var r,n,o,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n="/resources/permission/".concat(t),Object.keys(r).length&&(o=l.a.stringify(Object(a.a)({},r)),n+="?".concat(o)),e.next=5,i.a.get(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},967:function(e,t,r){},968:function(e,t,r){}}]);
//# sourceMappingURL=68.2e81fe6a.chunk.js.map